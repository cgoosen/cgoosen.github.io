---
layout: post
status: publish
published: true
title: Exchange 2010 Moving Mail Queue
author:
  display_name: Chris
  login: chris
  email: chris@cgoosen.com
  url: http://www.cgoosen.com
author_login: chris
author_email: chris@cgoosen.com
author_url: http://www.cgoosen.com
wordpress_id: 625
wordpress_url: http://www.cgoosen.com/2010/09/exchange-2010-moving-mail-queue/
date: '2010-09-07 18:09:37 +0000'
date_gmt: '2010-09-07 07:09:37 +0000'
categories:
- Exchange Server
tags: []
comments:
- id: 146
  author: Exchange 2007 SP1 Moving Mail Queue/Transport Dumpster
  author_email: ''
  author_url: http://www.cgoosen.com/2009/02/exchange-2007-sp1-moving-mail-queuetransport-dumpster/
  date: '2010-09-07 18:12:40 +0000'
  date_gmt: '2010-09-07 07:12:40 +0000'
  content: "[...] UPDATE: For information on how to move the Exchange 2010 Mail Queue,
    see &#8220;Exchange 2010 Moving Mail Queue&#8221; [...]"
- id: 282
  author: Raju
  author_email: kbr.kotla@gmail.com
  author_url: http://techbridle.blogspot.com
  date: '2012-06-06 20:07:06 +0000'
  date_gmt: '2012-06-06 09:07:06 +0000'
  content: |-
    Dear Chris...

    Nice article... impressed with information. its short and attactive.

    Thanks..Raju
- id: 283
  author: Chris
  author_email: chris@cgoosen.com
  author_url: http://www.cgoosen.com
  date: '2012-06-26 22:48:31 +0000'
  date_gmt: '2012-06-26 11:48:31 +0000'
  content: Thanks Raju!
- id: 242467
  author: jahid
  author_email: jahidjahid18@gmail.com
  author_url: ''
  date: '2014-11-09 07:49:44 +0000'
  date_gmt: '2014-11-09 13:49:44 +0000'
  content: "hI, i have change the location path, and i have restarted the microsoft
    exchange Transport service. but i cant see any queue log created in the new location.
    could you assist.\r\n\r\njahid"
- id: 243641
  author: Chris
  author_email: chris@cgoosen.com
  author_url: http://www.cgoosen.com
  date: '2014-11-12 17:39:12 +0000'
  date_gmt: '2014-11-12 23:39:12 +0000'
  content: |-
    Hi Jahid,

    Are you still experiencing this problem? What version of Exchange are you using (including updates)

    Thanks,

    Chris
- id: 267848
  author: Keith T Horsey
  author_email: keith.aich@organizdkaoz.com
  author_url: ''
  date: '2016-07-20 19:56:09 +0000'
  date_gmt: '2016-07-21 01:56:09 +0000'
  content: I tried this and the Transport service would not restart until I reverted
    the config file back to its previous version with the original paths put back
    in.
- id: 267903
  author: Chris
  author_email: chris@cgoosen.com
  author_url: http://www.cgoosen.com
  date: '2016-07-26 19:47:21 +0000'
  date_gmt: '2016-07-27 01:47:21 +0000'
  content: |-
    Hi Keith - I apologize for the delayed reply, for some reason I did not receive the comment notification.

    Did you manage to resolve your issue? I'm not entirely sure why that would be happening. Here is a link to the official documentation: https://technet.microsoft.com/en-us/library/bb125177(v=exchg.141).aspx

    Cheers,

    Chris
- id: 275766
  author: Mark
  author_email: mnewbegin@gmail.com
  author_url: ''
  date: '2018-10-20 13:11:50 +0000'
  date_gmt: '2018-10-20 19:11:50 +0000'
  content: "we had issues with our 2010 server it seemed like it was dragging and
    no emails were delivering. Upon further inspection I saw that our mail.que file
    was like 68GB. I tried to make some extra space on the server and then some messages
    started delivering again.  But after the 3rd or 4th reboot, our server automatically
    put the mail.que, into a folder called Queue.old\r\n\r\nI'm just worried some
    emails might not have been delivered but it seems like they were and a backlog
    of messages came in after this happend. I now have the Queue.old folder taking
    68GB on my hard drive. Can that folder be removed now.? there's nothing being
    written to it.\r\n\r\nmy Queue.old and my new mail.que have the exact same time
    and date.  10/20/18 6:09AM"
- id: 276174
  author: Chris
  author_email: chris@cgoosen.com
  author_url: http://www.cgoosen.com
  date: '2018-11-12 12:07:45 +0000'
  date_gmt: '2018-11-12 18:07:45 +0000'
  content: Hey Mark, are you still having this issue?
---
<p>In early 2009 I wrote an post entitled &ldquo;<a href="http://www.cgoosen.com/2009/02/exchange-2007-sp1-moving-mail-queuetransport-dumpster/" target="_blank">Exchange 2007 SP1 Moving Mail Queue/Transport Dumpster</a>&rdquo;. This post is still one of the most frequently viewed posts on my blog so I thought it was time to post an update for Exchange 2010.</p>
<p>In Exchange 2010, the location of the queue database and queue database transaction logs are controlled by the <em>QueueDatabasePath</em> and <em>QueueDatabaseLoggingPath</em> parameters in the EdgeTransport.exe.config application configuration file. This file is located in the C:\Program Files\Microsoft\Exchange Server\V14\Bin directory. To change the location of the queue database and queue database transaction logs, simple open this file in Notepad and locate the following values under <em><appSettings></em></p>
<p><em><add key="QueueDatabasePath" value="<LocalPath>" /></em></p>
<p><em><add key="QueueDatabaseLoggingPath" value="<LocalPath>" /></em></p>
<p>Change these paths to match your requirements and save the file.</p>
<p align="center"><a href="http://www.cgoosen.com/wp-content/uploads/2010/09/excas19.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="excas19" border="0" alt="excas19" src="http://www.cgoosen.com/wp-content/uploads/2010/09/excas19_thumb.png" width="561" height="172" /></a> </p>
<p align="left">Restart the Microsoft Exchange Transport service for these changes to take effect. Once restarted, you should notice that new Mail.que and Trn.chk files are created at the new <em>QueueDatabasePath</em> location and new Trn.log, Trntmp.log, Trnres00001.jrs, Trnres00002.jrs, and Temp.edb files at the new <em>QueueDatabaseLoggingPath </em>location.</p>
<p align="left">There are a few things to note about this process. Firstly, If the target directory doesn't exist, it will be automatically created if the parent directory has the following permissions:</p>
<ul>
<li>
<div align="left">Network Service: Full Control</div>
</li>
<li>
<div align="left">System: Full Control</div>
</li>
<li>
<div align="left">Administrators: Full Control </div>
</li>
</ul>
<p>The existing queue database and log files are not moved. New files are created at the new location and existing database files are left at the old location. These old files are no longer used.</p>
<p>If you would like to change the location of the queue database but reuse the existing queue database files, you must move or copy the database files when the Microsoft Exchange Transport service is stopped.</p>
